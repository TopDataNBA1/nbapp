<!-- AUTO-GENERATED: DO NOT EDIT MANUALLY -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOP DATA NBA LIVE</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>

            /* PANEL LATERAL (TU VERSIÓN, SIN CAMBIOS) */
            .filter-panel{
                position:fixed;
                top:0;
                right:-340px;
                width:300px;
                height:100vh;
                background:#111;
                border-left:none;
                box-shadow:none !important;
                transition:0.35s ease;
                z-index:9999;
                padding:20px;
                color:white;
                overflow-y:auto;
            }

            .filter-panel.open{
                right:0;
            }

            .filter-header{
                display:flex;
                justify-content:space-between;
                align-items:center;
                font-size:1.4em;
                margin-bottom:20px;
                color:#ff4655;
            }

            .close-btn{
                cursor:pointer;
                font-size:0.9em;
                color:#ff4655;
            }

            .filter-content{
                font-size:1.1em;
            }

            /* ============================
            TU CSS ORIGINAL COMPLETO
            ============================ */

            body{margin:0;padding:0;background:#0f0f1b;color:#e0e0e0;font-family:'Roboto',sans-serif;min-height:100vh;}
            .topbar{
                position:relative;
                height:70px;
                background:rgba(0,0,0,0.9);
                border-bottom:3px solid #ff4655;
            }

            .logo-img{
                position:absolute;
                left:20px;
                top:50%;
                transform:translateY(-50%);
                height:60px;
                width:auto;
            }

            .nbapp{
                position:absolute;
                left:50%;
                top:50%;
                transform:translate(-50%, -50%);
                font-family:'Orbitron',sans-serif;
                font-size:2.4em;
                color:#ff4655;
                text-shadow:0 0 10px #ff4655;
                font-weight:700;
            }

            .settings-icon{
                position:absolute;
                right:20px;
                top:50%;
                transform:translateY(-50%);
                font-size:28px;
                color:#ff4655;
                cursor:pointer;
                user-select:none;
            }

            .status-bar{padding:8px 20px;background:rgba(0,0,0,0.7);font-size:1.1em;text-align:center;}
            .status-line1{color:#55ff55;}
            .status-line2{color:#ffaa00;font-weight:600;}

            .tabs{max-width:900px;margin:15px auto;display:flex;border-radius:10px;overflow:hidden;box-shadow:0 4px 15px rgba(255,70,85,0.3);}
            .tab-btn{flex:1;padding:12px 8px;font-family:'Orbitron',sans-serif;font-size:1.1em;color:white;background:rgba(255,70,85,0.2);border:none;cursor:pointer;transition:0.3s;}
            .tab-btn:hover{background:rgba(255,70,85,0.4);}
            .tab-btn.active{background:#ff4655;box-shadow:0 0 12px #ff4655;}

            .tab-content{display:none;background:rgba(20,20,40,0.97);padding:10px;border-radius:0 0 10px 10px;}
            .tab-content.active{display:block;}
            .container{max-width:900px;margin:0 auto;}

            .moves-area{height:88vh;background:#1e1e2e;border-radius:16px;overflow:hidden;box-shadow:0 12px 40px rgba(255,70,85,0.4);display:flex;flex-direction:column;}
            .moves-list{flex:1;overflow-y:auto;padding:18px 12px;background:#0f0f1b;}
            .move-item{background:rgba(30,30,46,0.9);border-radius:14px;margin:14px 8px;padding:16px 14px;box-shadow:0 4px 12px rgba(0,0,0,0.5);}
            .move-photos{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-bottom:12px;}
            .move-photos img{width:78px;height:78px;border-radius:50%;object-fit:cover;border:4px solid #ff4655;box-shadow:0 0 15px rgba(255,70,85,0.6);}
            .move-text{font-size:1.01em;line-height:1.52;color:#e0e0e0;text-align:center;}
            .move-text strong{color:#ffaa00;font-weight:700;}
            .move-time{color:#888;font-size:0.89em;text-align:center;margin-top:10px;font-style:italic;}

            .filters{display:flex;gap:10px;margin:12px 0;justify-content:center;padding:4px 0;overflow-x:auto;}
            .filter-btn{white-space:nowrap;padding:6px 11px;background:rgba(255,70,85,0.25);border:1px solid #ff4655;border-radius:6px;font-family:'Orbitron',sans-serif;font-size:0.86em;cursor:pointer;transition:0.3s;}
            .filter-btn.active{background:#ff4655;box-shadow:0 0 10px #ff4655;font-weight:bold;}

            .card{background:rgba(20,20,40,0.97);border-radius:8px;overflow:hidden;margin:10px 0;box-shadow:0 4px 12px rgba(0,0,0,0.6);}
            .card h2{margin:0;padding:8px;font-family:'Orbitron',sans-serif;font-size:1.15em;background:#ff4655;color:white;text-align:center;}
            table{width:100%;border-collapse:collapse;font-size:0.84em;}
            th,td{padding:5px 4px;border-bottom:1px solid #333;}
            th{background:#1a1a2e;position:sticky;top:0;font-size:0.88em;}
            .rank{color:#ffaa00;text-align:center;font-weight:bold;width:8%;}
            .player{text-align:left;font-weight:500;width:28%;}
            .number,.today,.diff{text-align:right;}
            .today{font-weight:bold;width:12%;}
            .diff{color:#ffaa00;width:10%;}
            .diff-blink{color:#ffaa00!important;font-weight:900;animation:blink 1.6s infinite;}
            @keyframes blink{0%,100%{opacity:1}50%{opacity:0.5}}
            .leyenda{text-align:center;padding:10px;background:rgba(255,70,85,0.15);border:1px solid #ff4655;border-radius:8px;font-size:0.9em;margin:10px 0;}

            .collage img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                border-radius: 10px;
            }

            .collage {
                max-width: 300px;
                max-height: 200px;
                margin: 0 auto 12px;
            }

            .collage.c1 img { width:100%; height:100%; object-fit:cover; }

            .collage.c2 { display:flex; gap:6px; }
            .collage.c2 img { flex:1; height:100%; object-fit:cover; }

            .collage.c3 { display:flex; gap:6px; height:200px; }
            .collage.c3 .left, .collage.c3 .right { flex:1; display:flex; flex-direction:column; }
            .collage.c3 .left img, .collage.c3 .right img { flex:1; width:100%; object-fit:cover; }

            .collage.c4 {
                display:grid;
                grid-template-columns:1fr 1fr;
                grid-template-rows:1fr 1fr;
                gap:6px;
                height:200px;
            }
            .collage.c4 img { width:100%; height:100%; object-fit:cover; }


            /* ============================================
            PANEL PRO COMPACTO (NUEVO, INTEGRADO AQUÍ)
            ============================================ */

            .filter-tabs{
                display:flex;
                justify-content:space-between;
                margin-bottom:20px;
            }

            .filter-tabs .tab-btn{
                flex:1;
                background:none;
                border:none;
                color:#888;
                font-weight:bold;
                padding:10px;
                cursor:pointer;
            }

            .filter-tabs .tab-btn.active{
                color:white;
                border-bottom:2px solid #ff4655;
            }

            .filter-group{
                margin-bottom:20px;
            }

            .filter-group label{
                display:block;
                font-weight:bold;
                margin-bottom:8px;
                color:#ff4655;
            }

            .filter-buttons{
                display:flex;
                flex-wrap:wrap;
                gap:6px;
            }

            .filter-buttons button,
            .filter-all,
            .apply-close{
                background:#222;
                color:white;
                border:none;
                padding:6px 10px;
                border-radius:4px;
                cursor:pointer;
                font-size:0.9em;
            }

            .filter-buttons button.active,
            .filter-all.active,
            .apply-close:hover{
                background:#ff4655;
                color:white;
            }

            .global-all{
                width:100%;
                text-align:center;
                font-weight:bold;
                margin-bottom:10px;
            }

            .apply-close{
                width:100%;
                padding:10px;
                font-weight:bold;
                background:#333;
            }
            .hidden{
                display:none;
            }

    </style>

</head>
<body>

    <div class="topbar">
        <img src="logo.jpg" class="logo-img">
        <div class="nbapp">NBApp</div>
        <div id="settings-btn" class="settings-icon">⚙</div>
    </div>

    <div id="version" style="text-align:center;opacity:0.4;font-size:0.8em;margin-top:4px;">
        cargando versión...
    </div>

    <!-- PANEL DE FILTROS -->
    <div id="filter-panel" class="filter-panel">
        
        <div class="filter-tabs">
            <button class="tab-btn active" data-tab="latest">Latest Moves View</button>
            <button class="tab-btn" data-tab="push">Push Notifications</button>
        </div>

        <!-- ============================
            TAB: LATEST MOVES VIEW
        ============================ -->
        <div class="filter-content" data-tab-content="latest">

            <!-- ALL GLOBAL -->
            <div class="filter-group">
                <button class="filter-all global-all active">ALL – no filters</button>
            </div>

            <!-- TOP -->
            <div class="filter-group">
                <label>Top</label>
                <div class="filter-buttons exclusive" data-group="top">
                    <button class="active">All</button>
                    <button>Top100</button>
                    <button>Top25</button>
                </div>
            </div>

            <!-- STAT -->
            <div class="filter-group">
                <label>Stat</label>
                <div class="filter-buttons multi" data-group="stat">
                    <button class="active">All</button>
                    <button>PTS</button>
                    <button>REB</button>
                    <button>AST</button>
                    <button>STL</button>
                    <button>BLK</button>
                    <button>3PM</button>
                    <button>G</button>
                </div>
            </div>

            <!-- TEAM -->
            <div class="filter-group">
                <label>Team</label>
                <div class="filter-buttons multi" data-group="team">
                    <button class="active">All</button>
                    <button>ATL</button><button>BOS</button><button>BKN</button>
                    <button>CHA</button><button>CHI</button><button>CLE</button>
                    <button>DAL</button><button>DEN</button><button>DET</button>
                    <button>GSW</button><button>HOU</button><button>IND</button>
                    <button>LAC</button><button>LAL</button><button>MEM</button>
                    <button>MIA</button><button>MIL</button><button>MIN</button>
                    <button>NOP</button><button>NYK</button><button>OKC</button>
                    <button>ORL</button><button>PHI</button><button>PHX</button>
                    <button>POR</button><button>SAC</button><button>SAS</button>
                    <button>TOR</button><button>UTA</button><button>WAS</button>
                </div>
            </div>

            <!-- TYPE -->
            <div class="filter-group">
                <label>Type</label>
                <div class="filter-buttons exclusive" data-group="type">
                    <button class="active">All</button>
                    <button>Overtakes</button>
                    <button>Milestones</button>
                </div>
            </div>

            <!-- APPLY -->
            <div class="filter-group">
                <button class="apply-close">Apply and Close</button>
            </div>

        </div>

        <!-- ============================
            TAB: PUSH NOTIFICATIONS
        ============================ -->
        <div class="filter-content hidden" data-tab-content="push">

            <!-- ALL GLOBAL -->
            <div class="filter-group">
                <button class="filter-all global-all active">ALL – no filters</button>
            </div>

            <!-- TOP -->
            <div class="filter-group">
                <label>Top</label>
                <div class="filter-buttons exclusive" data-group="push-top">
                    <button class="active">All</button>
                    <button>Top100</button>
                    <button>Top25</button>
                </div>
            </div>

            <!-- STAT -->
            <div class="filter-group">
                <label>Stat</label>
                <div class="filter-buttons multi" data-group="push-stat">
                    <button class="active">All</button>
                    <button>PTS</button>
                    <button>REB</button>
                    <button>AST</button>
                    <button>STL</button>
                    <button>BLK</button>
                    <button>3PM</button>
                    <button>G</button>
                </div>
            </div>

            <!-- TEAM -->
            <div class="filter-group">
                <label>Team</label>
                <div class="filter-buttons multi" data-group="push-team">
                    <button class="active">All</button>
                    <button>ATL</button><button>BOS</button><button>BKN</button>
                    <button>CHA</button><button>CHI</button><button>CLE</button>
                    <button>DAL</button><button>DEN</button><button>DET</button>
                    <button>GSW</button><button>HOU</button><button>IND</button>
                    <button>LAC</button><button>LAL</button><button>MEM</button>
                    <button>MIA</button><button>MIL</button><button>MIN</button>
                    <button>NOP</button><button>NYK</button><button>OKC</button>
                    <button>ORL</button><button>PHI</button><button>PHX</button>
                    <button>POR</button><button>SAC</button><button>SAS</button>
                    <button>TOR</button><button>UTA</button><button>WAS</button>
                </div>
            </div>

            <!-- TYPE -->
            <div class="filter-group">
                <label>Type</label>
                <div class="filter-buttons exclusive" data-group="push-type">
                    <button class="active">All</button>
                    <button>Overtakes</button>
                    <button>Milestones</button>
                </div>
            </div>

            <!-- NONE -->
            <div class="filter-group">
                <label>Disable all notifications</label>
                <div class="filter-buttons exclusive" data-group="push-none">
                    <button>No notifications</button>
                </div>
            </div>

            <!-- APPLY -->
            <div class="filter-group">
                <button class="apply-close">Apply and Close</button>
            </div>

        </div>

    </div>

    <div class="status-bar">
        <div class="status-line1">ONLINE - Last update:</div>
        <div class="status-line2" id="clock-line">--:--:-- ET • --:--:-- CEST</div>
    </div>

    <div class="tabs">
        <button class="tab-btn active" onclick="openTab('telegram')">Latest Moves</button>
        <button class="tab-btn" onclick="openTab('live')">Live Rankings</button>
    </div>

    <!-- LATEST MOVES -->
    <div id="telegram" class="tab-content active">
        <div class="container">
            <div class="moves-area">
                <div class="moves-list">
                    <div id="moves-list"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- LIVE RANKINGS -->
    <div id="live" class="tab-content">
        <div class="container">
            <div class="leyenda">
                Today column: <span style="color:white">game finished</span> • 
                <span style="color:#ffaa00;text-shadow:0 0 8px #ffaa00">playing now</span> • 
                <span style="color:#888">not started</span> • 
                <span style="color:#ff5555">inactive</span>
            </div>
            <div class="filters">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="top25">Top 25</button>
                <button class="filter-btn" data-filter="top100">Top 100</button>
                <button class="filter-btn" data-filter="playing">Playing</button>
                <button class="filter-btn" data-filter="almost">Almost</button>
            </div>
            <div id="tables"></div>
        </div>
    </div>

    <script>
        function openTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            document.querySelector(`button[onclick="openTab('${tabName}')"]`).classList.add('active');
            if (tabName === 'live') updatePage();
            if (tabName === 'telegram') updateMoves();
        }

        const statNames = {pts:"NBA All-Time Points",trb:"NBA All-Time Rebounds",ast:"NBA All-Time Assists",stl:"NBA All-Time Steals",blk:"NBA All-Time Blocks",fg3:"NBA All-Time Three-Pointers",g:"NBA All-Time Games Played"};

        function getTimes() {
            const now = new Date();
            const cest = now.toLocaleTimeString('es-ES', {hour:'2-digit',minute:'2-digit',second:'2-digit',timeZone:'Europe/Paris'});
            const est = now.toLocaleTimeString('en-US', {hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:true,timeZone:'America/New_York'});
            return {cest, est};
        }

        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const filter = this.getAttribute('data-filter');
                if (filter === 'all') {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                } else {
                    document.querySelector('[data-filter="all"]').classList.remove('active');
                    if (filter === 'top25') document.querySelector('[data-filter="top100"]')?.classList.remove('active');
                    if (filter === 'top100') document.querySelector('[data-filter="top25"]')?.classList.remove('active');
                    this.classList.toggle('active');
                }
                updatePage();
            });
        });

        function getActiveFilters() {
            return {
                top25: document.querySelector('[data-filter="top25"]').classList.contains('active'),
                top100: document.querySelector('[data-filter="top100"]').classList.contains('active'),
                playing: document.querySelector('[data-filter="playing"]').classList.contains('active'),
                almost: document.querySelector('[data-filter="almost"]').classList.contains('active'),
                all: document.querySelector('[data-filter="all"]').classList.contains('active')
            };
        }

        function updatePage() {
            const {cest, est} = getTimes();
            document.getElementById('clock-line').textContent = `${est} ET • ${cest} CEST`;

            fetch('data.json?v=' + new Date().getTime())
                .then(r => r.ok ? r.json() : Promise.reject())
                .then(data => {
                    const tablesDiv = document.getElementById('tables');
                    tablesDiv.innerHTML = '';
                    const filters = getActiveFilters();

                    for (const [stat, tabla] of Object.entries(data.tablas || {})) {
                        if (!tabla.length) continue;

                        let filtered = tabla.filter(row => {
                            const rank = row.Rank;
                            const gameStatus = String(row.game_status || '').toLowerCase();
                            const hoy = row.Hoy ?? 0;
                            const diff = (row.Diff ?? '').toString().trim() || '0';

                            // FILTROS EXISTENTES
                            if (filters.top25 && rank > 25) return false;
                            if (filters.top100 && !filters.top25 && rank > 100) return false;
                            if (filters.playing && gameStatus !== 'playing') return false;

                            // FILTRO "ALMOST" – CON EXCEPCIÓN PERFECTA PARA GAMES PLAYED
                            if (filters.almost) {
                                if (stat === 'g') {
                                    // En Games Played: solo los que NO han jugado hoy (Hoy=0) y están a 0 del de arriba
                                    if (hoy !== 0 || !['0'].includes(diff)) return false;
                                } else {
                                    // En el resto de stats: como antes (a 0-1-2-3 del de arriba y jugando o no empezado)
                                    const isPlayingOrNotStarted = (gameStatus === 'playing' || gameStatus === 'not_started');
                                    const near = (stat === 'pts') ? ['0','1','2'] : ['0'];
                                    if (!isPlayingOrNotStarted || !near.includes(diff)) return false;
                                }
                            }

                            if (filters.all || (!filters.top25 && !filters.top100 && !filters.playing && !filters.almost)) return true;
                            return true;
                        });

                        if (filtered.length === 0) continue;

                        const card = document.createElement('div'); card.className = 'card';
                        card.innerHTML = `<h2>${statNames[stat]}</h2><table><thead><tr><th>Rank</th><th>Player</th><th>Team</th><th>Today</th><th>Total</th><th>Diff</th><th>Ahead Of</th></tr></thead><tbody></tbody></table>`;
                        const tbody = card.querySelector('tbody');

                        filtered.forEach(row => {
                            const hoy = row.Hoy ?? 0;
                            const diff = (row.Diff ?? '').toString().trim() || '0';
                            const gameStatus = String(row.game_status || '').toLowerCase();
                            const isInactive = hoy === -1;

                            const isPoints = stat === 'pts';
                            const isGames = stat === 'g';
                            const near = isPoints ? ['0','1','2','3'] : ['0','1'];
                            const mustBlinkNormal = (gameStatus === 'playing' || gameStatus === 'not_started') && near.includes(diff) && !isInactive;
                            const mustBlinkGames = isGames && (gameStatus === 'playing' || gameStatus === 'not_started') && hoy === 0 && near.includes(diff);
                            const mustBlink = isGames ? mustBlinkGames : mustBlinkNormal;

                            let todayStyle = '';
                            if (isInactive) todayStyle = 'color:#ff5555';
                            else if (gameStatus === 'finished') todayStyle = 'color:white';
                            else if (gameStatus === 'playing') todayStyle = 'color:#ffaa00;font-weight:900;text-shadow:0 0 12px #ffaa00';
                            else todayStyle = 'color:#888';

                            const tr = document.createElement('tr');
                            tr.innerHTML = `
                                <td class="rank">${row.Rank}</td>
                                <td class="player">${row.Nombre}</td>
                                <td class="team">${row.Team}</td>
                                <td class="today" style="${todayStyle}">${hoy}</td>
                                <td class="number"><strong>${Number(row.Total).toLocaleString()}</strong></td>
                                <td class="diff number${mustBlink?' diff-blink':''}">${diff}</td>
                                <td>${row.Antece||'-'}</td>`;
                            tbody.appendChild(tr);
                        });
                        tablesDiv.appendChild(card);
                    }
                });
        }

        // Función para convertir timestamp → "5m ago", "2h ago", "now", etc.
        function timeAgo(ts) {
            const now = Date.now() / 1000;
            const diff = Math.floor(now - ts);

            if (diff < 60) return "now";
            if (diff < 3600) return Math.floor(diff / 60) + "m ago";
            if (diff < 86400) return Math.floor(diff / 3600) + "h ago";
            return Math.floor(diff / 86400) + "d ago";
}    

        // LATEST MOVES CON FOTOS + TIEMPO
        function updateMoves() {
            const list = document.getElementById('moves-list');
            if (!list) return;

            fetch('data.json?v=' + new Date().getTime())
                .then(r => r.json())
                .then(data => {
                    const notis = (data.notificaciones || []).reverse();

                    list.innerHTML = notis.map(n => {
                        const texto = n.texto || "";
                        const fotos = Array.isArray(n.foto) ? n.foto : (n.foto ? [n.foto] : []);
                        const cuando = n.timestamp ? timeAgo(n.timestamp) : "";

                        // SIN FOTOS → solo texto
                        if (fotos.length === 0) {
                            return `
                                <div class="move-item">
                                    <div class="move-text">${texto}</div>
                                    <div class="move-time">${cuando}</div>
                                </div>`;
                        }

                        // 1 FOTO → ocupa todo
                        if (fotos.length === 1) {
                            return `
                                <div class="move-item">
                                    <div class="collage c1">
                                        <img src="${fotos[0]}" />
                                    </div>
                                    <div class="move-text">${texto}</div>
                                    <div class="move-time">${cuando}</div>
                                </div>`;
                        }

                        // 2 FOTOS → mitad / mitad
                        if (fotos.length === 2) {
                            return `
                                <div class="move-item">
                                    <div class="collage c2">
                                        <img src="${fotos[0]}" />
                                        <img src="${fotos[1]}" />
                                    </div>
                                    <div class="move-text">${texto}</div>
                                    <div class="move-time">${cuando}</div>
                                </div>`;
                        }

                        // 3 FOTOS → 1 a la izquierda, 2 a la derecha
                        if (fotos.length === 3) {
                            return `
                                <div class="move-item">
                                    <div class="collage c3">
                                        <div class="left"><img src="${fotos[0]}" /></div>
                                        <div class="right">
                                            <img src="${fotos[1]}" />
                                            <img src="${fotos[2]}" />
                                        </div>
                                    </div>
                                    <div class="move-text">${texto}</div>
                                    <div class="move-time">${cuando}</div>
                                </div>`;
                        }

                        // 4 FOTOS → grid 2x2
                        return `
                            <div class="move-item">
                                <div class="collage c4">
                                    ${fotos.slice(0,4).map(f=>`<img src="${f}" />`).join("")}
                                </div>
                                <div class="move-text">${texto}</div>
                                <div class="move-time">${cuando}</div>
                            </div>`;
                    }).join('');
                })
                .catch(err => {
                    console.error(err);
                    list.innerHTML = '<div style="text-align:center;color:#888;padding:50px;">Waiting for tonight\'s action...</div>';
                });
        }      

        function getPlayerId(name) {
            const ids = {
                "LeBron James": 2544, "Stephen Curry": 201939, "Kevin Love": 201567, "Al Horford": 201143,
                "Luka Doncic": 1629029, "Jayson Tatum": 1628369, "Draymond Green": 203110, "Trae Young": 1629027,
                "De'Aaron Fox": 1628368, "Harrison Barnes": 203084, "Tobias Harris": 202699, "Kentavious Caldwell-Pope": 203484,
                "Marcus Smart": 203935, "Kristaps Porzingis": 204001, "Jusuf Nurkic": 203994, "Buddy Hield": 1627741,
                "Duncan Robinson": 1629130, "Jaylen Brown": 1627759, "Anfernee Simons": 1629014, "Derrick White": 1628401,
                "Michael Porter Jr.": 1629008
            };
            return ids[name] || 0;
        }

        setInterval(() => {
            if (document.getElementById('telegram').classList.contains('active')) updateMoves();
            if (document.getElementById('live').classList.contains('active')) updatePage();
        }, 25000);

        updatePage();
        updateMoves();
    </script>

    <script>
    document.addEventListener("click", (e) => {
        // Abrir panel
        if (e.target.id === "settings-btn") {
            document.getElementById("filter-panel").classList.add("open");
        }

        // Cerrar panel
        if (e.target.id === "close-filters") {
            document.getElementById("filter-panel").classList.remove("open");
        }
    });
    </script>

    <script>
    let lastVersion = null;

    fetch("data.json?v=" + Date.now())
    .then(r => r.json())
    .then(data => {
        const version = data.ultima_actualizacion;

        // Primera carga → guardamos versión
        if (!lastVersion) {
            lastVersion = version;
            console.log("Versión cargada:", version);
            return;
        }

        // Si cambia → hay nueva versión
        if (version !== lastVersion) {
            alert("Nueva versión disponible (" + version + "). Recarga la página.");
        }
    });
    </script>

    <script>
    fetch("data.json?v=" + Date.now())
    .then(r => r.json())
    .then(data => {
        document.getElementById("version").textContent = "Versión: " + data.ultima_actualizacion;
    });
    #filter-panel.open{
        border-left: none !important;
        box-shadow: none !important;
    }
    </script>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        const tabButtons = document.querySelectorAll('.filter-tabs .tab-btn');
        const tabContents = document.querySelectorAll('#filter-panel .filter-content');

        tabButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const target = btn.getAttribute('data-tab');

                // activar pestaña visual
                tabButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                // mostrar/ocultar contenidos
                tabContents.forEach(content => {
                    const tabName = content.getAttribute('data-tab-content');
                    if (tabName === target) {
                        content.classList.remove('hidden');
                    } else {
                        content.classList.add('hidden');
                    }
                });
            });
        });
    });
    </script>

    <script>
    document.addEventListener("DOMContentLoaded", () => {

        /* ============================================================
        FUNCIÓN: activar botón exclusivo (solo uno activo)
        ============================================================ */
        function activateExclusive(groupEl, clickedBtn) {
            const buttons = groupEl.querySelectorAll("button");
            buttons.forEach(btn => btn.classList.remove("active"));
            clickedBtn.classList.add("active");
        }

        /* ============================================================
        FUNCIÓN: activar botón múltiple (varios activos)
        ============================================================ */
        function activateMulti(groupEl, clickedBtn) {
            const isAll = clickedBtn.textContent.trim() === "All";

            if (isAll) {
                // Si pulsas All → desactiva todos los demás
                groupEl.querySelectorAll("button").forEach(btn => btn.classList.remove("active"));
                clickedBtn.classList.add("active");
            } else {
                // Si pulsas otro → desactiva All
                const allBtn = groupEl.querySelector("button:first-child");
                allBtn.classList.remove("active");

                // Alterna el botón pulsado
                clickedBtn.classList.toggle("active");

                // Si no queda ninguno activo → vuelve a activar All
                const anyActive = [...groupEl.querySelectorAll("button")].some(btn => btn.classList.contains("active"));
                if (!anyActive) allBtn.classList.add("active");
            }
        }

        /* ============================================================
        FUNCIÓN: activar botón NONE (solo en notificaciones)
        ============================================================ */
        function activateNone(groupEl, clickedBtn) {
            const buttons = groupEl.querySelectorAll("button");
            buttons.forEach(btn => btn.classList.remove("active"));
            clickedBtn.classList.add("active");

            // Desactivar TODOS los demás grupos de notificaciones
            const pushGroups = document.querySelectorAll('[data-group^="push-"]:not([data-group="push-none"])');
            pushGroups.forEach(g => {
                g.querySelectorAll("button").forEach(btn => btn.classList.remove("active"));
                // Reactivar All en cada grupo
                const allBtn = g.querySelector("button:first-child");
                if (allBtn) allBtn.classList.add("active");
            });
        }

        /* ============================================================
        FUNCIÓN: activar ALL GLOBAL (resetea todo)
        ============================================================ */
        function activateGlobalAll() {
            const allGroups = document.querySelectorAll(".filter-buttons");

            allGroups.forEach(group => {
                const buttons = group.querySelectorAll("button");
                buttons.forEach(btn => btn.classList.remove("active"));
                const allBtn = group.querySelector("button:first-child");
                if (allBtn) allBtn.classList.add("active");
            });

            // Desactivar NONE también
            const noneGroup = document.querySelector('[data-group="push-none"]');
            if (noneGroup) {
                noneGroup.querySelectorAll("button").forEach(btn => btn.classList.remove("active"));
            }
        }

        /* ============================================================
        ASIGNAR EVENTOS A TODOS LOS BOTONES
        ============================================================ */
        document.querySelectorAll(".filter-buttons").forEach(groupEl => {
            const type = groupEl.classList.contains("exclusive") ? "exclusive" : "multi";

            groupEl.querySelectorAll("button").forEach(btn => {
                btn.addEventListener("click", () => {

                    // Caso especial: NONE
                    if (groupEl.dataset.group === "push-none") {
                        activateNone(groupEl, btn);
                        return;
                    }

                    // Caso especial: ALL GLOBAL
                    if (btn.classList.contains("global-all")) {
                        activateGlobalAll();
                        return;
                    }

                    // Exclusivo
                    if (type === "exclusive") {
                        activateExclusive(groupEl, btn);
                        return;
                    }

                    // Múltiple
                    if (type === "multi") {
                        activateMulti(groupEl, btn);
                        return;
                    }
                });
            });
        });

        /* ============================================================
        BOTÓN ALL GLOBAL (fuera de los grupos)
        ============================================================ */
        document.querySelectorAll(".global-all").forEach(btn => {
            btn.addEventListener("click", () => { 
                activateGlobalAll(); 
            }); 
        }); 
    }); 
    </script>

</body>
</html>